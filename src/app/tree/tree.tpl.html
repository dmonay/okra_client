<section class="organization-wrapper">
	<div class="organization active" layout="row" layout-align="center" id="organizationNode">
		<div class="tree-node">
			{{vm.tree.TreeName}}
		</div>
		<div layout="column" layout-align="start end">
			<md-button href class="md-raised md-primary" 
					ok-collapse 
					ok-toggle-color
					linked-to="organizationNode"
					all-linked-nodes="vm.linkedNodeIds"
					aria-label="toggle">
	        	<i class="fa fa-plus"></i>
	    	</md-button>
	    	<md-button href class="md-raised md-primary" aria-label="edit">
				<i class="fa fa-pencil"></i>
	    	</md-button>
	    </div>
	    <div layout="column" layout-align="start end">
	    	<md-button class="md-raised md-primary" ng-click="vm.openTreeMembersModal()" aria-label="members">
		    	<i class="fa fa-users"></i>
		    </md-button>
		    <md-button class="md-raised md-primary" ng-click="vm.openMissionStatementModal()" aria-label="mission statement">
		    	<i class="fa fa-briefcase"></i>
		    </md-button>
	    </div>
	</div> 

	<!-- objectives -->
	<div layout="row" class="collapse" layout-align="center center" id="objectiveNode">
		<div class="objective" layout="row" layout-align="start" ng-repeat="objective in vm.tree.Objectives">
			<div class="tree-node" layout-align="start" ng-show="!objective.isEditMode">
				{{objective.Name}}
				<md-tooltip ng-if="objective.Name.length > 14">
					{{objective.Name}}
				</md-tooltip>
			</div>
			<div class="tree-node" layout-align="start" ng-show="objective.isEditMode">
				<md-input-container>
				   <md-input required class="short" name="treeName" ng-model="objective.newName" autocapitalize="off"></md-input>
				</md-input-container>
			</div>
			<div layout="column" layout-align="start end" ok-edit-node edit="fa-pencil" cancel="fa-close" save="fa-check" node="objective">
	            <md-button href class="md-raised" ng-click="vm.changeCurrentObjective(objective)" ok-collapse ok-toggle-color linked-to="objectiveNode"  all-linked-nodes="vm.linkedNodeIds" aria-label="toggle">
	            	<i class="fa fa-plus"></i>
	        	</md-button>
	        	<md-button ng-show="!objective.isEditMode" href class="md-raised md-primary fade-in" aria-label="edit">
					<i class="fa fa-pencil"></i>
	        	</md-button>
	        </div>
	        <div layout="column" layout-align="start end" ok-edit-node edit="fa-pencil" cancel="fa-close" save="fa-check" node="objective">
	        	<md-button ng-show="objective.isEditMode" href class="md-raised md-primary fade-in" aria-label="save">
					<i class="fa fa-check"></i>
	        	</md-button>
	        	<md-button ng-show="objective.isEditMode" href class="md-raised md-warn fade-in" aria-label="close">
					<i class="fa fa-close"></i>
	        	</md-button>
	        </div>
		</div>
		<div class="objective" layout="row" layout-align="start" ng-if="vm.tree.Objectives.length !== 4">
			<a href ng-click="vm.openNodeModalDashboard($event, false, 'Objective', false)" class="tree-node" layout-align="start">
				Add Objective <i class="fa fa-plus"></i>
			</a>
		</div>
	</div>

	<!-- key results -->
	<div layout="row" class="collapse" layout-align="center center" id="keyResultNode">
		<div class="key-result" layout="row" layout-align="start" ng-repeat="keyResult in vm.currentObjective.key_results">
			<div class="tree-node" ng-show="!keyResult.isEditMode">
				{{keyResult.Name}}
				<md-tooltip ng-if="keyResult.Name.length > 14">
					{{keyResult.Name}}
				</md-tooltip>
			</div>
			<div class="tree-node" layout-align="start" ng-show="keyResult.isEditMode">
				<md-input-container>
				   <md-input required class="short" name="treeName" ng-model="keyResult.newName" autocapitalize="off"></md-input>
				</md-input-container>
			</div>
			<div layout="column" layout-align="start end" ok-edit-node edit="fa-pencil" cancel="fa-close" save="fa-check" node="keyResult">
				<md-button href class="md-raised" ng-click="vm.changeCurrentKeyResult(keyResult)" ok-collapse ok-toggle-color linked-to="keyResultNode" all-linked-nodes="vm.linkedNodeIds" aria-label="toggle">
	            	<i class="fa fa-plus"></i>
	        	</md-button>
	        	<md-button href ng-show="!keyResult.isEditMode" class="md-raised md-primary fade-in" aria-label="edit">
					<i class="fa fa-pencil"></i>
	        	</md-button>
	        </div>
	        <div layout="column" layout-align="start end" ok-edit-node edit="fa-pencil" cancel="fa-close" save="fa-check" node="keyResult">
	        	<md-button ng-show="keyResult.isEditMode" href class="md-raised md-primary fade-in" aria-label="save">
					<i class="fa fa-check"></i>
	        	</md-button>
	        	<md-button ng-show="keyResult.isEditMode" href class="md-raised md-warn fade-in" aria-label="close">
					<i class="fa fa-close"></i>
	        	</md-button>
	        </div>
		</div>
		<div class="key-result" layout="row" layout-align="start" ng-if="vm.tree.currentObjective.key_results.length !== 4">
			<div class="tree-node" layout-align="start">
				Add Key Result <i class="fa fa-plus"></i>
			</div>
		</div>
	</div>

	<!-- Tasks -->
	<div layout="column" class="collapse" ok-collapse linked-to="taskNode" layout-align="space-around center" all-linked-nodes="vm.linkedNodeIds" id="taskNode">
		<div layout="row" layout-align="start center" ng-repeat="task in vm.currentKeyResult.tasks">
			<md-checkbox ng-model="task.complete" aria-label></md-checkbox>
			<div class="task-node">
				{{task.Name}}
			</div>
		</div>
	</div>
</section>